type4
=====

type4 is x86_64 compiler can use the float value.


反省する

floatを実装するのは大変だったし、ソースはごちゃごちゃになってしまいました。
これはもっとスッキリできるはずです。作業を振り返ってどうすればスッキリ出来るか考えてみたいと思います。
floatの扱いで難しかった点を挙げてみます。

1. 扱うレジスタ群が違うので処理が複雑化しました。
2. float値は即値としては使えず、メモリに格納しておいて読み込む必要がありました。

型を扱うだけなら、charを扱うほうが簡単だったと思います。
ただ、浮動小数点用のレジスタを扱い、リテラルを扱う事も覚えられたのは収穫でした。

現状のソースにある問題をあげてみます。

1. 必要のないしょりがあるかもしれない
2. 重複した処理があるかもしれない
3. リテラルの扱いをもっとシンプルにできるかもしれない

その他にも開発が面倒になっていた点がありました。

1. テストデータの作成が面倒でした。
　　ScalaのtoStringは意味は分かるけどそのまま読み込めるデータを吐いてくれないのでテストデータを作るのに時間がかかりました。
　　prity print があればもっと速く楽に作れたと思います。
2. diffが取りずらい。
　　最初からgitのリポジトリを作っておけば良かった。
3. コマンドラインでビルドしていた。
　　結局、eclipseの設定はしてたのだけど、使い方をすっかり忘れているので思い出すのもメンドクサイ。
　　いつも使っている、NetBeansなら忘れる事も少ないだろうと思うので開発環境はnetbeansにすることにしました。

ということで、以下の作業をしてより快適に開発出来るようにしました。

1. netbeansでプロジェクトを作る
2. gitのリポジトリをあらかじめ作る
3. 元になったファイルを持って来て登録する
4. 上書きする
5. diffを見る
6. プリティプリントを作る

プリティプリントは最初から作っておくべきでした。scalaに張るだけなので楽です。

次の作業はテストデータを作ることです。
各 objectのメイン関数にそのパスで処理するデータを設定して実行して問題ない事を確認します。
また、作ったテストデータはドキュメントに記述します。
こうする事でよりよい開発が出来ると思います。

で、次の段階は、暗黙の型変換を入れるとか、配列を入れるとかあるんですけど、どうしようかなぁ。
どれも難しそう、、、。

うーむ。いずれも難しい問題ばかりですが、１つ１つ解決して行くしかないとおもいます。

で、次なのだけど、charを入れたいのだけど、
charを入れる際の難しさは、暗黙の型変換がひつようだってことです。
その前に、floatに対するintの暗黙の型変換を入れましょう。
そうすれば自動的にcharの暗黙の型変換も作れます。
